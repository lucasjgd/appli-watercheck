<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}WaterCheck
			{% endblock %}
		</title>

		{% block stylesheets %}
			<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
			<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css2?family=Saira:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
			<link href="{{ asset('css/styles.css') }}" rel="stylesheet">
		{% endblock %}

		{% block javascripts %}
			<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
		{% endblock %}
	</head>
	<body>
		<header class="text-white py-3">
			<div class="container d-flex justify-content-between align-items-center">
				<h1 class="m-0">WaterCheck</h1>
				<nav>
					<ul class="nav align-items-center">
						<li class="nav-item">
							<a class="nav-link text-white" href="{{ path('index') }}">Accueil</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-white" href="{{ path('prelevements') }}">Prélèvements</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-white" href="{{ path('carte') }}">Carte des prélèvements</a>
						</li>

						{% if app.session.get('utilisateur') %}
							{% set role = app.session.get('utilisateur').role|lower %}

							{% if role == 'client' %}
								<li class="nav-item">
									<a class="nav-link text-white" href="{{ path('deconnexion') }}">
										Déconnexion ({{ app.session.get('utilisateur').nom }})
									</a>
								</li>
							{% else %}
								<li class="nav-item dropdown">
									<a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										Gestion
									</a>
									<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
										<li>
											<a class="dropdown-item" href="{{ path('gestion_prelevement') }}">Gestion des prélèvements</a>
										</li>
										<li>
											<a class="dropdown-item" href="{{ path('gestion_type_ph') }}">Gestion des types de pH</a>
										</li>
										<li>
											<a class="dropdown-item" href="{{ path('gestion_emplacement') }}">Gestion des emplacements</a>
										</li>
										<li>
											<a class="dropdown-item" href="{{ path('gestion_utilisateur') }}">Gestion des utilisateurs</a>
										</li>
									</ul>
								</li>
								<li class="nav-item">
									<a class="d-flex align-items-center gap-1 nav-link p-2 bg-white rounded-2" href="{{ path('deconnexion') }}">{{ app.session.get('utilisateur').nom }}
									<i class="fa-solid fa-right-from-bracket"></i>
									</a>
								</li>
							{% endif %}
						{% else %}
							<li class="nav-item">
								<a class="d-flex align-items-center gap-1 nav-link p-2 bg-white rounded-2" href="{{ path('connexion') }}">
									<i class="fa-solid fa-user"></i>
								</a>
							</li>
						{% endif %}
					</ul>
				</nav>
			</div>
		</header>
		{% block body %}{% endblock %}
		<footer class="d-flex align-items-center flex-row justify-content-around p-3">
			<p class="mt-0 mb-0">&copy; 2025 WaterCheck - Tous droits réservés</p>
			<p class="mt-0 mb-0">Par Lucas JOGAND</p>
		</footer>
	</body>
</html>
